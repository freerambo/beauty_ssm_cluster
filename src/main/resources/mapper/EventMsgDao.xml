<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"  "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.github.cruiser.dao.EventMsgDao">


	<insert id="insert" parameterType="EventMsg">
		INSERT INTO
		event_msg(to_user_name, from_user_name, create_time, msg_type, event, msg_id,
			callback_status, push_status, order_id)
		VALUES
		(#{toUserName}, #{fromUserName}, #{createTime}, #{msgType},
			#{event}, #{msgId}, #{callbackStatus}, #{pushStatus}, #{orderId})
	</insert>

	<select id="queryByFromUserName" resultType="EventMsg">
		SELECT *
		FROM
        event_msg
		WHERE
        from_user_name = #{fromUserName}
        ORDER BY create_time desc
		limit #{offset},#{limit}
	</select>

	<select id="queryByOrderId" resultType="EventMsg">
		SELECT *
		FROM
		event_msg
		WHERE
		order_id = #{orderId}
		ORDER BY create_time desc
	</select>

</mapper>